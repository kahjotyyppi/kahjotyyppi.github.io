import{c as Fe}from"./vue-i18n-Dt_1LYA_.js";import{r as Pe}from"./vue-BjVh0Y9t.js";import{e as d,f as p,B as f,E as $,C as te,A,b6 as l,F as U,i as G,v as w,K as R,L as B,I as K,g as m,b3 as se,b0 as ae,x as O,k as Re,j as Y,r as Be,b7 as Ie,M as Oe,ai as Ee}from"./@vue-DDeinw2Q.js";import{o as me,f as pe,G as he,a as fe,C as ge,F as _e,p as be,P as $e,t as ye,O as ve,e as Ae,q as xe,b as Ve,Z as Ne,r as je,s as Ue,A as Ge,j as He,m as qe}from"./ol-rqzA0ZN_.js";import{a as Ke}from"./axios-DItqprHK.js";import{e as H}from"./tiny-emitter-Bb-4E7m6.js";import{c as Ye}from"./vuex-CPQGDrZo.js";import{P as De,l as ze}from"./plotly.js-Bj9aAt69.js";import{H as ke}from"./@vuepic-ZMEZOBC_.js";import"./ol-mapbox-style-BV_UKEQe.js";import{c as q}from"./lodash-xmOw4shY.js";import{p as Se}from"./vue3-click-away-cDExn2lm.js";import{a as Ze}from"./@plotly-cZgOmFVv.js";import"./@intlify-BqCMBkRY.js";import"./rbush-DoHIURGA.js";import"./quickselect-cI_fw6Fh.js";import"./pbf-7dCXdWa0.js";import"./ieee754-DSYfm7We.js";import"./color-space-CC1atxIw.js";import"./color-rgba-BJ4KHDKn.js";import"./color-parse-DZuJRDq4.js";import"./is-mobile-DTbNOGI7.js";import"./native-promise-only-Buitr3gJ.js";import"./d3-time-format-Dn935jZ-.js";import"./d3-time-CLP019ua.js";import"./d3-format-CSOwNcOn.js";import"./fast-isnumeric-a5YRvFrk.js";import"./is-string-blank-CjnoGYLr.js";import"./base64-arraybuffer-CX6YUH_W.js";import"./tinycolor2-CQLLzbDb.js";import"./gl-mat4-DY9MfRJ-.js";import"./has-hover-CznNzQ9h.js";import"./is-browser-36xSGOqd.js";import"./events-CXH2uRM3.js";import"./parse-svg-path-C3wHdri1.js";import"./mouse-event-offset--XKrXIUx.js";import"./has-passive-events-w9EHtJMP.js";import"./polybooljs-C8JaxsT5.js";import"./point-in-polygon-C7qZ-OSy.js";import"./date-fns-C7_rVUPb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var We={VITE_MML_API_KEY:"ba40e643-3a55-487f-aea4-c5906b1b597f",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,APP_VERSION:"3.0.0",NODE_ENV:"production"},X=Fe({inheriteLocale:!0,globalInjection:!0,legacy:!1,locale:localStorage.getItem("locale"),fallbackLocale:We.VUE_APP_I18N_FALLBACK_LOCALE||"fi",preserveDirectiveContent:!1,messages:{fi:{info:{header:"Tietoa",title:"Tietoa",p1:"Opendata on STUKin kehittämä avoimen lähdekoodin applikaatio, jolla voit tarkastella Suomen ulkoisen säteilyn valvontaverkon mittaustuloksia. Applikaatio saa datansa Ilmatieteen laitoksen avoimen datan rajapinnasta.",p2:"Lue lisää projektin ",p3:"GitHub-sivuilta"},settings:{title:"Asetukset",header:"Asetukset",language:"Kieli",date:"Päivitä päivämäärää",time:"Päivitä kellonaikaa",dateFormat:"Päiväyksen muoto",dateFormatA:"PP.KK.VVVV",dateFormatB:"VVVV-KK-PP",labelFinnish:"Suomi",labelEnglish:"Englanti",timeFormat:"Ajan esitysmuoto",timeFormatA:"24 tunnin kello",timeFormatB:"12 tunnin kello",backgroundMap:"Kartta",backgroundMapDefault:"Oletus (OSM)",backgroundMapCustom:"Mukautettu"},changeMode:{title:"Vaihda näkymää (annosnopeudet/ilman radioaktiivisuus)"},playback:{title:{date:"Päivitä päiväämäärää",time:"Päivitä kellonaikaa",disabled:{date:"Valitse aikaisempi päivämäärä",time:"Valitse aikaisempi kellonaika"},start:"Aloita toisto",stop:"Pysäytä toisto",speed:"Toistonopeus"}},dose:{doseRateTresholds:"Annosnopeusrajat"},radionuclideMode:{date:"Keräysjakso",concentration:"Aktiivisuuspitoisuus",uncertainty:"Epävarmuus",noData:"Tälle aikajaksolle ei ole saatavilla dataa",info:"Pääkaupunkiseudun mittauspiste on muuttanut vuoden 2022 toukokuun alusta Helsingistä Vantaalle. Vuoden 2022 huhtikuun loppuun saakka mittaustuloksia voi hakea Helsingistä. Toukokuusta 2022 alkaen tulokset löytyvät Vantaalta."},doseRate:"Annosnopeudet",airRadionuclides:"Ilman Radionuklidit"},en:{info:{header:"About",title:"About",p1:"Opendata is an open source application developed by STUK that enables viewing of external radiation results from around Finland. The application gets its data from the Finnish Meteorological Institute's open data API.",p2:"To learn more visit the project on ",p3:"GitHub"},settings:{title:"Settings",header:"Settings",language:"Language",date:"Update date",time:"Update time",dateFormat:"Date format",dateFormatA:"DD.MM.YYYY",dateFormatB:"YYYY.MM.DD",labelFinnish:"Finnish",labelEnglish:"English",timeFormat:"Time notation",timeFormatA:"24-hour clock",timeFormatB:"12-hour clock",backgroundMap:"Map",backgroundMapDefault:"Default (OSM)",backgroundMapCustom:"Custom"},changeMode:{title:"Change mode (dose rates/air radionuclides)"},playback:{title:{date:"Update date",time:"Update time",disabled:{date:"Choose an earlier date to enable playback",time:"Choose an earlier time to enable playback"},start:"Start playback",stop:"Stop playback",speed:"Playback speed"}},dose:{doseRateTresholds:"Dose rate thresholds"},radionuclideMode:{date:"Collection Period",concentration:"Concentration",uncertainty:"Uncertainty",noData:"No data available for this time period",info:"The measurement point for the capital region has moved from Helsinki to Vantaa at the beginning of May 2022. Until the end of April 2022, you can view measurement results from Helsinki. From may 2022, the results can be found from Vantaa."},doseRate:"Dose Rates",airRadionuclides:"Air Radionuclides"}}});const h=(e,t)=>{const s=e.__vccOpts||e;for(const[i,n]of t)s[i]=n;return s},Je={name:"BaseRadioButton",props:{label:{type:String,required:!0},ownValue:{type:String,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],data(){return{id:String(Math.random())}},computed:{isChecked(){return this.ownValue===this.modelValue}},methods:{onChange(){this.$emit("update:modelValue",this.ownValue)}}},Qe=["id","checked"],Xe=["for"];function et(e,t,s,i,n,a){return d(),p("div",{key:s.label,class:"container"},[f("input",{id:n.id,type:"radio",class:"radio-button-input",checked:a.isChecked,onChange:t[0]||(t[0]=(...o)=>a.onChange&&a.onChange(...o))},null,40,Qe),f("label",{class:"label",for:n.id},$(s.label),9,Xe)])}const tt=h(Je,[["render",et],["__scopeId","data-v-21683c87"]]),st={install(e){e.component("BaseRadioButton",tt)}},E={async get(e){return await Ke.get(e)}},at={async queryAvailableDatasets(){let t=(await E.get("data/dose_rates/metadata.json")).data.available_data;return t.forEach(s=>{s.date=new Date(s.date),s.times.sort()}),t.sort((s,i)=>new Date(s.date)-new Date(i.date)),t},async getDataset(e){return(await E.get(e)).data},async getTimeSeries(e,t){const s=t.toISOString().split("T")[0],i="data/dose_rates/time_series/"+e+"/"+s+".json";return(await E.get(i)).data.data}},ee={async getDataset(e){return(await E.get(e)).data},async getTimeSeries(e,t,s){const i=[],n=new Date(s),a=24*60*60*1e3,o=new Date(n.getTime()-30*a),r=`data/air_radionuclides/time_series/${e}/${t}/available_filenames.json`;try{const k=(await E.get(r)).data;for(const C of k){const T=C.replace(".json","").split("TO");if(T.length===2){const L=new Date(T[0]),I=new Date(T[1]);if(L<=n&&L>=o||I<=n&&I>=o||L<=o&&I>=n){const M=`data/air_radionuclides/time_series/${e}/${t}/${C}`;try{const S=await E.get(M);S.data&&S.data.data&&i.push(...S.data.data)}catch{console.log(`Data not found for file ${C}`)}}}}}catch(c){console.error(`Error fetching available files: ${c}`)}return i},async getAvailableRadionuclides(e){const t=`/data/air_radionuclides/time_series/${e}/available_radionuclides.json`;try{const s=await E.get(t);return s&&s.data&&Array.isArray(s.data)?s.data:(console.error("Invalid response format for available radionuclides:",s),[])}catch(s){return console.error(`Error fetching available radionuclides for site ${e}:`,s),[]}}},z={doseRate:at,airRadionuclide:ee},g={$on:(...e)=>H.on(...e),$once:(...e)=>H.once(...e),$off:(...e)=>H.off(...e),$emit:(...e)=>H.emit(...e)},nt={name:"DoseRateLayer",emits:["doseRateLayerChanged"],data(){return{vectorLayer:new me({source:new pe({format:new he({defaultDataProjection:"EPSG:4326"})}),renderMode:"vector",preload:20,renderBuffer:20,renderOrder:function(e,t){return e.get("doseRate")<t.get("doseRate")?-1:1},style:e=>{let t="#0000";const s=e.get("doseRate"),i=this.$store.state.settings.settings.mapLegend.bars;for(let a=0;a<i.length;++a){const o=i[a].threshold,r=i[a+1]?i[a+1].threshold:1e9;if(s>=o&&s<r)if(i[a].isEnabled){t=i[a].color;break}else return}return[new fe({image:new ge({radius:this.featureRadius,fill:new _e({color:t})})})]}})}},computed:{mode(){return this.$store.state.settings.settings.mode},isDoseRateMode(){return this.mode==="dose_rates"},datasetFilePath(){return!this.isDoseRateMode||!this.$store.state.datetime.selectedDate?"":"data/dose_rates/datasets/"+this.$store.state.datetime.selectedDate.toISOString().split("T")[0]+"T"+this.$store.state.datetime.selectedTime+".json"},doseRateRanges(){return this.$store.state.settings.settings.mapLegend.bars}},watch:{datasetFilePath:async function(){if(!this.isDoseRateMode)return"";try{this.$Progress.start();const t=(await z.doseRate.getDataset(this.datasetFilePath)).features.map(s=>new be({geometry:new $e(ye(s.geometry.coordinates,"EPSG:4326","EPSG:3857")),id:s.properties.id,site:s.properties.site,doseRate:s.properties.doseRate}));this.vectorLayer.getSource().clear(!0),this.vectorLayer.getSource().addFeatures(t),g.$emit("doseRateLayerChanged",this.vectorLayer),this.$Progress.finish()}catch{this.$Progress.fail()}},doseRateRanges:{handler:function(){this.isDoseRateMode&&this.redraw()},deep:!0}},mounted(){this.isDoseRateMode&&g.$on("settingsChanged",this.redraw)},methods:{redraw(){this.isDoseRateMode&&this.vectorLayer.changed()},updateFeatureRadius(e){if(this.isDoseRateMode){const t=this.featureRadius,s=e*2;s!==t&&(this.featureRadius=s,this.redraw())}}}};function it(e,t,s,i,n,a){return d(),p("div")}const ot=h(nt,[["render",it],["__scopeId","data-v-980e98ae"]]),rt={name:"RadionuclideLayer",emits:["radionuclideLayerChanged"],data(){return{vectorLayer:new me({source:new pe({format:new he({defaultDataProjection:"EPSG:4326"})}),renderMode:"vector",preload:20,renderBuffer:20,style:()=>{const e="#1d66af";return[new fe({image:new ge({radius:this.featureRadius,fill:new _e({color:e})})})]}})}},computed:{mode(){return this.$store.state.settings.settings.mode},isAirRadionuclidesMode(){return this.mode==="air_radionuclides"},datasetFilePath(){return this.isAirRadionuclidesMode?"data/air_radionuclides/time_series/sites.json":""}},watch:{datasetFilePath:async function(){if(this.isAirRadionuclidesMode)try{this.$Progress.start();const t=(await z.airRadionuclide.getDataset(this.datasetFilePath)).map(s=>new be({geometry:new $e(ye(s.coordinates,"EPSG:4326","EPSG:3857")),id:s.id,site:s.site}));this.vectorLayer.getSource().clear(!0),this.vectorLayer.getSource().addFeatures(t),g.$emit("radionuclideLayerChanged",this.vectorLayer),this.$Progress.finish()}catch{this.$Progress.fail()}}},mounted(){this.isAirRadionuclidesMode&&g.$on("settingsChanged",this.redraw)},methods:{redraw(){this.isAirRadionuclidesMode&&this.vectorLayer.changed()},updateFeatureRadius(e){if(this.isAirRadionuclidesMode){const t=this.featureRadius,s=e*2;s!==t&&(this.featureRadius=s,this.redraw())}}}};function lt(e,t,s,i,n,a){return d(),p("div")}const dt=h(rt,[["render",lt],["__scopeId","data-v-fd547418"]]),ct={name:"MapLegendBar",props:{mapLegendBar:{type:Object,required:!0}},emits:["click"]};function ut(e,t,s,i,n,a){return d(),p("div",{style:te({backgroundColor:s.mapLegendBar.color}),class:A([{"map-legend__bar--disabled":!s.mapLegendBar.isEnabled},"map-legend__bar"]),onClick:t[0]||(t[0]=o=>e.$emit("click"))},$(s.mapLegendBar.label),7)}const mt=h(ct,[["render",ut]]),pt={name:"MapLegend",components:{MapLegendBar:mt},computed:{mapLegendBars(){return this.$store.state.settings.settings.mapLegend.bars}},methods:{toggle(e){this.$store.state.settings.settings.mapLegend.toggleBar(e)}}},ht={class:"map-legend"};function ft(e,t,s,i,n,a){const o=l("map-legend-bar");return d(),p("div",ht,[(d(!0),p(U,null,G(a.mapLegendBars,(r,c)=>(d(),w(o,{key:c,"map-legend-bar":r,onClick:k=>a.toggle(c)},null,8,["map-legend-bar","onClick"]))),128))])}const gt=h(pt,[["render",ft]]),_t={name:"SiteName",props:{feature:{type:Object,default:void 0},disableCloseButton:{type:Boolean,default:!1}},emits:["close"],computed:{site(){return this.feature?this.feature.get("site"):"-"}}},bt={class:"site-header opendata-row"},$t={class:"site-name"};function yt(e,t,s,i,n,a){return d(),p("div",bt,[f("span",$t,$(a.site),1),R(f("span",{class:"close-button",onClick:t[0]||(t[0]=o=>e.$emit("close"))},"×",512),[[B,!s.disableCloseButton]])])}const we=h(_t,[["render",yt],["__scopeId","data-v-498617e8"]]),vt={name:"SiteDoseRate",props:{feature:{type:Object,default:void 0}},computed:{doseRate(){return this.feature&&this.feature.get("doseRate")!==null?this.feature.get("doseRate"):"-"}}},Dt={class:"site-dose-rate"},kt={class:"site-dose-rate__value"},St=f("span",{class:"site-dose-rate__unit"}," µSv/h",-1);function wt(e,t,s,i,n,a){return d(),p("div",Dt,[f("span",kt,[K($(a.doseRate),1),St])])}const Ce=h(vt,[["render",wt]]),Ct={name:"FeaturePopover",components:{SiteName:we,SiteDoseRate:Ce},data(){return{isEnabled:!0,overlay:void 0,feature:void 0,previousFeature:void 0}},computed:{mode(){return this.$store.state.settings.settings.mode},isDoseRatesMode(){return this.mode==="dose_rates"},isRadionuclideMode(){return this.mode==="air_radionuclides"}},mounted(){g.$on("featureHovered",this.open),g.$on("emptyMapLocationHovered",this.close),g.$on("featurePopupOpened",this.disable),g.$on("featurePopupClosed",this.enable),g.$on("doseRateLayerChanged",this.update),g.$on("radioNuclideLayerChanged",this.update),this.overlay=new ve({element:this.$refs.featurePopover,position:void 0})},methods:{enable(){this.isEnabled=!0},disable(){this.isEnabled=!1,this.close()},open(e){this.isEnabled&&e!==this.previousFeature&&(this.feature=e,this.overlay.setPosition(e.getGeometry().getCoordinates()),this.previousFeature=e)},close(){this.overlay.setPosition(void 0),this.previousFeature=void 0},update(e){var t=e.getSource().getFeatures();if(t.length!=0){for(var s=0;s<t.length;++s)if(t[s].get("id")==this.siteId){this.feature=t[s];return}this.feature=void 0}}}},Tt={ref:"featurePopover",class:"feature-popover"};function Lt(e,t,s,i,n,a){const o=l("site-name"),r=l("site-dose-rate");return d(),p("div",Tt,[m(o,{feature:n.feature,"disable-close-button":""},null,8,["feature"]),R(m(r,{feature:n.feature},null,8,["feature"]),[[B,a.isDoseRatesMode]])],512)}const Mt=h(Ct,[["render",Lt]]),ne={getDatesBetween(e,t){for(var s=[],i=new Date(e),n=new Date(t);i<=n;)s.push(new Date(i)),i.setDate(i.getDate()+1);return s},convertTimeTo12HourClock(e){var t=+e.substr(0,2),s=t%12||12,i=t<12?"am":"pm";return s+e.substr(2,3)+" "+i}};function Ft(e){return new Promise(t=>setTimeout(t,e))}const Pt={setTime(e,t){e.selectedTime=t},setDate(e,t){e.selectedDate=t},setAvailableDatasets(e,t){e.availableDatasets=t}},Rt={async initialize({dispatch:e}){await e("queryAvailableDatasets"),await e("selectNewestDate"),await e("selectNewestTime"),setInterval(()=>{e("queryAvailableDatasets")},6e5)},async queryAvailableDatasets({commit:e}){const t=await z.doseRate.queryAvailableDatasets();e("setAvailableDatasets",t)},selectNewestDate({state:e,dispatch:t}){if(e.availableDatasets.length==0)return;const s=e.availableDatasets.slice(-1)[0].date;t("setDate",s)},selectNewestTime({getters:e,commit:t}){const s=e.availableTimesForSelectedDate;if(s.length!=0){var i=s.slice(-1)[0];t("setTime",i)}},decrementTime({commit:e,dispatch:t,getters:s,state:i}){if(s.isOldestDateSelected&&s.isOldestTimeSelected)return;const n=s.availableTimesForSelectedDate.indexOf(i.selectedTime);if(n==0)t("decrementDate"),t("selectNewestTime");else{const o=s.availableTimesForSelectedDate[n-1];e("setTime",o)}},incrementTime({commit:e,dispatch:t,getters:s,state:i}){if(s.isNewestDateSelected&&s.isNewestTimeSelected)return;const n=s.availableTimesForSelectedDate.indexOf(i.selectedTime);if(n==s.availableTimesForSelectedDate.length-1)t("incrementDate"),e("setTime",s.availableTimesForSelectedDate[0]);else{const o=s.availableTimesForSelectedDate[n+1];e("setTime",o)}},decrementDate({dispatch:e,getters:t,state:s}){if(!t.isOldestDateSelected){const n=s.availableDatasets.map(o=>o.date.toDateString()).indexOf(s.selectedDate.toDateString()),a=s.availableDatasets[n-1].date;e("setDate",a)}},incrementDate({dispatch:e,getters:t,state:s}){if(!t.isNewestDateSelected){const n=s.availableDatasets.map(o=>o.date.toDateString()).indexOf(s.selectedDate.toDateString()),a=s.availableDatasets[n+1].date;e("setDate",a)}},setDate({state:e,commit:t,dispatch:s,getters:i},n){t("setDate",n),i.availableTimesForSelectedDate.includes(e.selectedTime)||s("selectNewestTime")}},Bt={availableTimesForSelectedDate(e){if(!e.selectedDate)return[];for(let t=0;t<e.availableDatasets.length;++t)if(e.availableDatasets[t].date.toDateString()==e.selectedDate.toDateString())return e.availableDatasets[t].times;return[]},isOldestDateSelected(e){if(e.availableDatasets.length==0||!e.selectedDate)return!1;const t=e.availableDatasets[0].date;return e.selectedDate.toDateString()==t.toDateString()},isNewestDateSelected(e){if(e.availableDatasets.length==0||!e.selectedDate)return!1;const t=e.availableDatasets.slice(-1)[0].date;return e.selectedDate.toDateString()==t.toDateString()},isOldestTimeSelected(e,t){if(t.isOldestDateSelected){const s=t.availableTimesForSelectedDate[0];return e.selectedTime==s}return!1},isNewestTimeSelected(e,t){if(t.isNewestDateSelected){const s=t.availableTimesForSelectedDate.slice(-1)[0];return e.selectedTime==s}return!1}},It={state:{availableDatasets:[],selectedDate:void 0,selectedTime:void 0},mutations:Pt,actions:Rt,getters:Bt},Ot={setSettings(e,t){e.settings=t,e.settings.save()}},Et={initialize({state:e}){e.settings.load()}};class At{constructor(){this.bars=[],this.addBar(new x(0,"#1dafaf")),this.addBar(new x(.1,"#1d8baf")),this.addBar(new x(.2,"#1d66af")),this.addBar(new x(.3,"#1d41af")),this.addBar(new x(.4,"#411daf"))}addBar(t){let s=this.bars.slice(-1)[0];s&&(s.nextBar=t),this.bars.push(t)}toggleBar(t){const s=this.bars[t];s.toggleState(),this.bars[t]=s}clear(){this.bars=[]}toString(){return JSON.stringify(this.bars.map(t=>t.toString()))}}class x{constructor(t,s){this.nextBar=void 0,this.threshold=t<10?t.toFixed(1):t,this.color=s,this.isEnabled=!0}get label(){return this.nextBar?`${this.threshold} - ${this.nextBar.threshold}`:`> ${this.threshold} µSv/h`}toggleState(){this.isEnabled=!this.isEnabled}toString(){return`{"threshold": ${this.threshold}, "color": "${this.color}"}`}}const oe="locale",re="dateFormat",le="timeFormat",Q="mapLegend",de="backgroundMap",ce="mode";class Te{constructor(){this.locale="en",this.dateFormat="fi",this.timeFormat="24h",this.mapLegend=new At,this.backgroundMap="default",this.mode="dose_rates"}save(){X.global.locale.value=this.locale,localStorage.setItem(oe,this.locale),localStorage.setItem(re,this.dateFormat),localStorage.setItem(le,this.timeFormat),localStorage.setItem(Q,this.mapLegend),localStorage.setItem(de,this.backgroundMap),localStorage.setItem(ce,this.mode)}load(){this.locale=localStorage.getItem(oe)||this.locale,X.global.locale.value=this.locale,this.dateFormat=localStorage.getItem(re)||this.dateFormat,this.timeFormat=localStorage.getItem(le)||this.timeFormat,this.backgroundMap=localStorage.getItem(de)||this.backgroundMap,this.mode=localStorage.getItem(ce)||this.mode;let t=localStorage.getItem(Q);if(t)try{t=JSON.parse(t);const s=t.map(i=>JSON.parse(i));s.length>0&&(this.mapLegend.clear(),s.forEach(i=>{this.mapLegend.addBar(new x(i.threshold,i.color))}))}catch{localStorage.removeItem(Q)}}}const xt={state:{settings:new Te},mutations:Ot,actions:Et},V=Ye({modules:{datetime:It,settings:xt}});class Vt{constructor(t,s){this.date=t,this.dataPoints=s}}let ue=class{constructor(t){this.siteId=t,this.dataPoints=[],this.datasets=[],this.startDate=void 0,this.endDate=void 0,this.onUpdate=()=>{},this.isLoading=!1}loadTimespan(t,s){this.startDate=t,this.endDate=s,this.startDate&&this.endDate&&this.siteId&&this.update()}async update(){let t=ne.getDatesBetween(this.startDate,this.endDate);t=t.filter(s=>{const i=this.datasets.some(a=>a.date.getTime()==s.getTime()),n=V.state.datetime.availableDatasets.some(a=>a.date.getTime()==s.getTime());return!i&&n}),t.length>0&&(this.isLoading=!0,await Promise.allSettled(t.map(async s=>{let i;try{i=await z.doseRate.getTimeSeries(this.siteId,s)}finally{this.datasets.push(new Vt(s,i))}})),await Ft(250),this.datasets.sort((s,i)=>s.date<i.date?-1:1),this.generateDataPoints(),this.isLoading=!1),this.onUpdate()}generateDataPoints(){let t=[],s=[];for(var i=0;i<this.datasets.length;++i)if(this.datasets[i].dataPoints)for(var n=0;n<this.datasets[i].dataPoints.length;++n){const a=this.datasets[i].dataPoints[n];t.push(new Date(a.e).toISOString()),s.push(a.r)}this.dataPoints=[{x:t,y:s}]}};const Nt={name:"LoadingSpinner",props:{isEnabled:{type:Boolean,default:!1}}},jt=e=>(se("data-v-3f037726"),e=e(),ae(),e),Ut={class:"spinner-container"},Gt=jt(()=>f("div",{class:"spinner"},null,-1)),Ht=[Gt];function qt(e,t,s,i,n,a){return R((d(),p("div",Ut,Ht,512)),[[B,s.isEnabled]])}const Le=h(Nt,[["render",qt],["__scopeId","data-v-3f037726"]]);De.register(ze);const Kt={name:"TimeSeriesGraph",components:{LoadingSpinner:Le},props:{feature:{type:Object,default:void 0}},data:function(){return{timeSeriesGraph:new ue,plotlyLayout:{},defaultPlotlyLayout:{width:0,height:0,dragmode:"pan",margin:{t:20,r:0,b:50,l:50,pad:15},yaxis:{range:[0,.4]},font:{size:12,family:"RedHatText-Medium"}},plotlyConfig:{scrollZoom:!0,connectGaps:!0,displayModeBar:!1,locale:"en"}}},computed:{selectedDate(){return this.$store.state.datetime.selectedDate},locale(){return this.$store.state.settings.settings.locale},isLoading(){return this.timeSeriesGraph.isLoading},featureId(){return this.feature?this.feature.get("id"):void 0},mode(){return this.$store.state.settings.settings.mode},isAirRadionuclidesMode(){return this.mode==="air_radionuclides"}},watch:{featureId:function(){this.reset()},selectedDate:function(){this.reset()},locale:function(e){this.plotlyConfig.locale=e,this.draw()}},mounted(){this.updateSize(!0),this.$refs.graphContainer.on("plotly_relayout",this.onPlotlyRelayout),window.onresize=this.updateSize},methods:{draw(){this.isAirRadionuclidesMode||(this.updateSize(),De.react(this.$refs.graphContainer,this.timeSeriesGraph.dataPoints,this.plotlyLayout,this.plotlyConfig))},async onPlotlyRelayout(e){if(!this.isAirRadionuclidesMode){if(!e||!e["xaxis.range[0]"]||!e["xaxis.range[1]"])return;const t=new Date(e["xaxis.range[0]"].split(" ")[0]),s=new Date(e["xaxis.range[1]"].split(" ")[0]);await this.timeSeriesGraph.loadTimespan(t,s)}},updateSize(e=!1){this.isAirRadionuclidesMode||(window.innerWidth>=1024?(this.plotlyLayout.width=475,this.plotlyLayout.height=400,this.plotlyLayout.font={size:14}):window.innerWidth>=768?(this.plotlyLayout.width=300,this.plotlyLayout.height=220,this.plotlyLayout.font={size:12}):(this.plotlyLayout.width=300,this.plotlyLayout.height=180,this.plotlyLayout.font={size:10}),e&&this.draw())},reset(){this.isAirRadionuclidesMode||(this.plotlyLayout=JSON.parse(JSON.stringify(this.defaultPlotlyLayout)),this.timeSeriesGraph=new ue(this.featureId),this.timeSeriesGraph.onUpdate=this.draw.bind(this),this.timeSeriesGraph.loadTimespan(this.selectedDate,this.selectedDate))}}},Yt={class:"wrapper"},zt={ref:"graphContainer"};function Zt(e,t,s,i,n,a){const o=l("loading-spinner");return d(),p("div",Yt,[f("div",zt,[m(o,{"is-enabled":a.isLoading},null,8,["is-enabled"])],512)])}const Wt=h(Kt,[["render",Zt],["__scopeId","data-v-7520aac4"]]),Jt={name:"RadionuclideTables",components:{LoadingSpinner:Le},props:{feature:{type:Object,default:()=>({})},date:Date},data(){return{tablesData:[],isLoading:!1,helsinkiVantaa:!1}},computed:{formatDates(){return e=>{switch(this.$store.state.settings.settings.dateFormat){case"fi":default:return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`;case"iso":return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}}},hasData(){return this.tablesData.some(e=>e.entries.length>0)},mode(){return this.$store.state.settings.settings.mode},isAirRadionuclidesMode(){return this.mode==="air_radionuclides"},sortedTablesData(){const e=["Be-7","Cs-137","Pb-210","Na-22"];return this.tablesData.slice().sort((t,s)=>{const i=e.indexOf(t.radionuclide),n=e.indexOf(s.radionuclide);return i===-1&&n===-1?0:i===-1?1:n===-1?-1:i-n})}},watch:{feature:{immediate:!0,handler(){this.fetchData(new Date)}}},mounted(){g.$on("dateChanged",this.fetchData)},methods:{async fetchData(e){if(!this.feature||!this.feature.get)return;const t=this.feature.get("id");if(t&&(t==103428||t==107554?this.helsinkiVantaa=!0:this.helsinkiVantaa=!1,this.isAirRadionuclidesMode))try{this.isLoading=!0;let s=await ee.getAvailableRadionuclides(t);if(s=s.filter(n=>n!=="air-volume"),!s||s.length===0)return;const i=s.map(async n=>{try{const a=await ee.getTimeSeries(t,n,e),o=this.removeDuplicates(a||[]).sort((r,c)=>new Date(c.s)-new Date(r.s));return{radionuclide:n,entries:o}}catch(a){return console.error(`Error fetching data for radionuclide ${n}:`,a),{radionuclide:n,entries:[]}}});this.tablesData=await Promise.all(i)}catch(s){console.error("Error in fetching data:",s)}finally{this.isLoading=!1}},removeDuplicates(e){const t=new Set;return e.filter(s=>{const i=`${s.s}-${s.e}-${s.c}-${s.u}`;return t.has(i)?!1:(t.add(i),!0)})},isPriorityNuclide(e){return["Be-7","Cs-137","Pb-210","Na-22"].includes(e)}}},Qt={class:"radionuclide-tables"},Xt={key:0},es={key:0},ts={key:0},ss={key:1},as={key:0};function ns(e,t,s,i,n,a){const o=l("loading-spinner");return d(),p("div",Qt,[m(o,{"is-enabled":n.isLoading},null,8,["is-enabled"]),n.isLoading?O("",!0):(d(),p("div",Xt,[a.hasData?(d(),p("div",es,[(d(!0),p(U,null,G(a.sortedTablesData,(r,c)=>(d(),p("div",{key:c,class:"table-container"},[r.entries.length>0?(d(),p("div",ts,[f("p",{class:A({"bold-header":!a.isPriorityNuclide(r.radionuclide)})},$(r.radionuclide),3),f("table",null,[f("thead",null,[f("tr",null,[f("th",null,$(e.$t("radionuclideMode.date")),1),f("th",null,$(e.$t("radionuclideMode.concentration"))+" µBq/m3",1),f("th",null,$(e.$t("radionuclideMode.uncertainty"))+"-%",1)])]),f("tbody",null,[(d(!0),p(U,null,G(r.entries,k=>(d(),p("tr",{key:k.s},[f("td",null,$(a.formatDates(new Date(k.s)))+" - "+$(a.formatDates(new Date(k.e))),1),f("td",null,$(k.c),1),f("td",null,$(k.u),1)]))),128))])])])):O("",!0)]))),128))])):O("",!0),a.hasData?O("",!0):(d(),p("div",ss,[f("p",null,$(e.$t("radionuclideMode.noData")),1),n.helsinkiVantaa?(d(),p("p",as,$(e.$t("radionuclideMode.info")),1)):O("",!0)]))]))])}const is=h(Jt,[["render",ns],["__scopeId","data-v-4d03d4a2"]]),os={name:"DatePicker",components:{VueDatePicker:ke},emits:["dateChanged"],data(){return{selectedDate:new Date,fi:"fi",en:"en"}},computed:{language(){switch(this.$store.state.settings.settings.locale){case"en":default:return this.en;case"fi":return this.fi}},pastDate(){const e=new Date(this.selectedDate);return e.setDate(e.getDate()-30),e},isToday(){const e=new Date;return this.selectedDate.getDate()===e.getDate()&&this.selectedDate.getMonth()===e.getMonth()&&this.selectedDate.getFullYear()===e.getFullYear()},mode(){return this.$store.state.settings.settings.mode}},mounted(){g.$on("featureClicked",this.resetDate)},methods:{formatDates(e){switch(this.$store.state.settings.settings.dateFormat){case"fi":return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`;case"iso":default:return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}},resetDate(){this.mode=="air_radionuclides"&&(this.selectedDate=new Date)},handleDateChange(e){this.selectedDate=new Date(e),g.$emit("dateChanged",this.selectedDate)},prevDay(){const e=new Date(this.selectedDate);e.setDate(e.getDate()-1),this.selectedDate=e,g.$emit("dateChanged",this.selectedDate)},nextDay(){const e=new Date(this.selectedDate);this.isToday||(e.setDate(e.getDate()+1),this.selectedDate=e,g.$emit("dateChanged",this.selectedDate))}}},rs={class:"date-picker"},ls={class:"controls"};function ds(e,t,s,i,n,a){const o=l("vue-date-picker");return d(),p("div",rs,[f("div",ls,[f("p",null,$(a.formatDates(a.pastDate))+" -",1),f("button",{onClick:t[0]||(t[0]=(...r)=>a.prevDay&&a.prevDay(...r))}," < "),m(o,{modelValue:n.selectedDate,"onUpdate:modelValue":t[1]||(t[1]=r=>n.selectedDate=r),locale:a.language,format:a.formatDates,"auto-apply":"","enable-time-picker":!1,"max-date":new Date,"hide-input-icon":"",onDateUpdate:a.handleDateChange},null,8,["modelValue","locale","format","max-date","onDateUpdate"]),f("button",{class:A({disabled:a.isToday}),onClick:t[2]||(t[2]=(...r)=>a.nextDay&&a.nextDay(...r))}," > ",2)])])}const cs=h(os,[["render",ds]]),us={name:"FeaturePopup",components:{SiteName:we,SiteDoseRate:Ce,TimeSeriesGraph:Wt,RadionuclideTables:is,DatePicker:cs},emits:["featurepopupOpened","featurepopupClosed"],data(){return{overlay:void 0,feature:void 0}},computed:{mode(){return this.$store.state.settings.settings.mode},isDoseRatesMode(){return this.mode==="dose_rates"},isRadionuclideMode(){return this.mode==="air_radionuclides"}},watch:{isDoseRatesMode(){this.close()}},mounted(){g.$on("featureClicked",this.open),g.$on("emptyMapLocationClicked",this.close),this.overlay=new ve({element:this.$refs.featurePopup,position:void 0}),g.$on("featureClicked",this.open),g.$on("featureSelectedViaSearch",this.open),g.$on("emptyMapLocationClicked",this.close),g.$on("doseRateLayerChanged",this.update)},methods:{open(e){this.feature=e,this.overlay.setPosition(e.getGeometry().getCoordinates()),g.$emit("featurePopupOpened",e),this.$nextTick(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0)})},close(){this.feature=void 0,this.overlay.setPosition(void 0),g.$emit("featurePopupClosed")},update(e){var t=e.getSource().getFeatures();if(!(t.length==0||!this.feature)){for(var s=0;s<t.length;++s)if(t[s].get("id")==this.feature.get("id")){this.feature=t[s];return}this.feature.set("doseRate","-")}}}},ms={ref:"featurePopup",class:"feature-popup"};function ps(e,t,s,i,n,a){const o=l("site-name"),r=l("site-dose-rate"),c=l("time-series-graph"),k=l("date-picker"),C=l("radionuclide-tables");return d(),p("div",ms,[m(o,{feature:n.feature,onClose:a.close},null,8,["feature","onClose"]),R(m(r,{feature:n.feature},null,8,["feature"]),[[B,a.isDoseRatesMode]]),R(m(c,{feature:n.feature},null,8,["feature"]),[[B,a.isDoseRatesMode]]),R(m(k,null,null,512),[[B,a.isRadionuclideMode]]),R(m(C,{feature:n.feature},null,8,["feature"]),[[B,a.isRadionuclideMode]])],512)}const hs=h(us,[["render",ps],["__scopeId","data-v-5984984b"]]),fs={name:"ButtonOpenSettings",emits:["settings-panel-open"],methods:{handleClick(){g.$emit("settings-panel-open")}}},gs=["title"],_s=f("span",{class:"button-open-settings__icon"},null,-1),bs=[_s];function $s(e,t,s,i,n,a){return d(),p("div",{class:"button-open-settings",title:e.$t("settings.title"),onClick:t[0]||(t[0]=o=>a.handleClick())},bs,8,gs)}const ys=h(fs,[["render",$s]]),vs={name:"ButtonOpenInfo",emits:["info-panel-open"],methods:{handleClick(){g.$emit("info-panel-open")}}},Ds=e=>(se("data-v-9c6735c7"),e=e(),ae(),e),ks=["title"],Ss=Ds(()=>f("span",{class:"button-open-info__icon"},null,-1)),ws=[Ss];function Cs(e,t,s,i,n,a){return d(),p("div",{class:"button-open-info",title:e.$t("info.title"),onClick:t[0]||(t[0]=o=>a.handleClick())},ws,8,ks)}const Ts=h(vs,[["render",Cs],["__scopeId","data-v-9c6735c7"]]),Ls={name:"ButtonChangeMode",computed:{mode(){return this.$store.state.settings.settings.mode},isDoseRate(){return this.mode==="dose_rates"},isAirRadionuclides(){return this.mode==="air_radionuclides"}},methods:{handleClick(){const e=this.mode==="dose_rates"?"air_radionuclides":"dose_rates";g.$emit("mode-changed",e)}}},Ms=e=>(se("data-v-3898a807"),e=e(),ae(),e),Fs=["title"],Ps=Ms(()=>f("span",{class:"button-change-mode__icon"},null,-1));function Rs(e,t,s,i,n,a){return d(),p("div",{class:"button-change-mode",title:e.$t("changeMode.title"),onClick:t[0]||(t[0]=(...o)=>a.handleClick&&a.handleClick(...o))},[Ps,f("h3",null,[f("span",{class:A({selected:a.isDoseRate,notSelected:!a.isDoseRate})},$(e.$t("doseRate")),3),K(" / "),f("span",{class:A({selected:a.isAirRadionuclides,notSelected:!a.isAirRadionuclides})},$(e.$t("airRadionuclides")),3)])],8,Fs)}const Bs=h(Ls,[["render",Rs],["__scopeId","data-v-3898a807"]]),Is={name:"SettingsPanelHeader",emits:["close"]},Os={class:"settings-panel-header opendata-row"};function Es(e,t,s,i,n,a){return d(),p("div",Os,[f("span",null,$(e.$t("settings.header")),1),f("span",{class:"close-button",onClick:t[0]||(t[0]=o=>e.$emit("close"))},"×")])}const As=h(Is,[["render",Es],["__scopeId","data-v-79d97c99"]]),xs={name:"SettingsPanelSection",props:{title:{type:String,required:!0}}},Vs={class:"section"},Ns={class:"title"};function js(e,t,s,i,n,a){return d(),p("div",Vs,[f("p",Ns,$(s.title),1),Re(e.$slots,"default",{class:"content"},void 0,!0)])}const Z=h(xs,[["render",js],["__scopeId","data-v-fed687d3"]]),Us={name:"FieldLanguage",components:{SettingsPanelSection:Z},props:{settings:{type:Object,required:!0}}};function Gs(e,t,s,i,n,a){const o=l("base-radio-button"),r=l("settings-panel-section");return d(),w(r,{title:e.$t("settings.language")},{default:Y(()=>[m(o,{key:"fi",modelValue:s.settings.locale,"onUpdate:modelValue":t[0]||(t[0]=c=>s.settings.locale=c),"model-value":s.settings.locale,"own-value":"fi",label:e.$t("settings.labelFinnish"),class:"radio-button"},null,8,["modelValue","model-value","label"]),m(o,{key:"en",modelValue:s.settings.locale,"onUpdate:modelValue":t[1]||(t[1]=c=>s.settings.locale=c),"model-value":s.settings.locale,"own-value":"en",label:e.$t("settings.labelEnglish"),class:"radio-button"},null,8,["modelValue","model-value","label"])]),_:1},8,["title"])}const Hs=h(Us,[["render",Gs],["__scopeId","data-v-bfcd2737"]]),qs={name:"FieldDateFormat",components:{SettingsPanelSection:Z},props:{settings:{type:Object,required:!0}}};function Ks(e,t,s,i,n,a){const o=l("base-radio-button"),r=l("settings-panel-section");return d(),w(r,{title:e.$t("settings.dateFormat")},{default:Y(()=>[m(o,{key:"fi",modelValue:s.settings.dateFormat,"onUpdate:modelValue":t[0]||(t[0]=c=>s.settings.dateFormat=c),"model-value":s.settings.dateFormat,"own-value":"fi",label:e.$t("settings.dateFormatA"),class:"radio-button"},null,8,["modelValue","model-value","label"]),m(o,{key:"iso",modelValue:s.settings.dateFormat,"onUpdate:modelValue":t[1]||(t[1]=c=>s.settings.dateFormat=c),"model-value":s.settings.dateFormat,"own-value":"iso",label:e.$t("settings.dateFormatB"),class:"radio-button"},null,8,["modelValue","model-value","label"])]),_:1},8,["title"])}const Ys=h(qs,[["render",Ks],["__scopeId","data-v-b4352245"]]),zs={name:"FieldTimeFormat",components:{SettingsPanelSection:Z},props:{settings:{type:Object,required:!0}}};function Zs(e,t,s,i,n,a){const o=l("base-radio-button"),r=l("settings-panel-section");return d(),w(r,{title:e.$t("settings.timeFormat")},{default:Y(()=>[m(o,{key:"24h",modelValue:s.settings.timeFormat,"onUpdate:modelValue":t[0]||(t[0]=c=>s.settings.timeFormat=c),"model-value":s.settings.timeFormat,"own-value":"24h",label:e.$t("settings.timeFormatA"),class:"radio-button"},null,8,["modelValue","model-value","label"]),m(o,{key:"12h",modelValue:s.settings.timeFormat,"onUpdate:modelValue":t[1]||(t[1]=c=>s.settings.timeFormat=c),"model-value":s.settings.timeFormat,"own-value":"12h",label:e.$t("settings.timeFormatB"),class:"radio-button"},null,8,["modelValue","model-value","label"])]),_:1},8,["title"])}const Ws=h(zs,[["render",Zs],["__scopeId","data-v-505c2119"]]);let Js,Qs;const Xs=new Ae({source:new xe({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),preload:100}),ea=!1,ta={name:"FieldBackgroundMap",components:{SettingsPanelSection:Z},props:{settings:{type:Object,required:!0}},data(){return{customMapsEnabled:ea}}};function sa(e,t,s,i,n,a){const o=l("base-radio-button"),r=l("settings-panel-section");return d(),w(r,{title:e.$t("settings.backgroundMap")},{default:Y(()=>[m(o,{key:"default",modelValue:s.settings.backgroundMap,"onUpdate:modelValue":t[0]||(t[0]=c=>s.settings.backgroundMap=c),"model-value":s.settings.backgroundMap,"own-value":"default",label:e.$t("settings.backgroundMapDefault"),class:"radio-button"},null,8,["modelValue","model-value","label"]),n.customMapsEnabled?(d(),w(o,{key:"custom",modelValue:s.settings.backgroundMap,"onUpdate:modelValue":t[1]||(t[1]=c=>s.settings.backgroundMap=c),"model-value":s.settings.backgroundMap,"own-value":"custom",label:e.$t("settings.backgroundMapCustom"),class:"radio-button"},null,8,["modelValue","model-value","label"])):O("",!0)]),_:1},8,["title"])}const aa=h(ta,[["render",sa],["__scopeId","data-v-e2e045d7"]]),na={name:"BaseBackdrop",emits:["click"]};function ia(e,t,s,i,n,a){return d(),p("div",{class:"backdrop",onClick:t[0]||(t[0]=o=>e.$emit("click"))})}const W=h(na,[["render",ia],["__scopeId","data-v-6e4e4d03"]]),oa={name:"AppVersion",computed:{appVersion(){return"v3.0.0"}}},ra={class:"row justify-content-center mt-3 app-version"};function la(e,t,s,i,n,a){return d(),p("div",ra,[f("span",null,$(a.appVersion),1)])}const da=h(oa,[["render",la]]),ca={name:"SettingsPanel",components:{SettingsPanelHeader:As,FieldLanguage:Hs,FieldDateFormat:Ys,FieldTimeFormat:Ws,FieldBackgroundMap:aa,BaseBackdrop:W,AppVersion:da},emits:["settingsChanged"],data:function(){return{isEnabled:!1,settings:new Te}},watch:{settings:{deep:!0,handler(){this.saveSettings()}}},mounted(){g.$on("settings-panel-open",this.enable),g.$on("mode-changed",this.modeChange)},methods:{enable(){this.settings=q(this.$store.state.settings.settings),this.isEnabled=!0,this.$nextTick(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0)})},disable(){this.isEnabled=!1,this.saveSettings()},saveSettings(){this.$store.commit("setSettings",q(this.settings)),g.$emit("settingsChanged")},modeChange(e){this.settings=q(this.$store.state.settings.settings),this.settings.mode=e,this.$store.commit("setSettings",q(this.settings))}}},ua={class:"settings-panel"},ma={ref:"panelBody",class:"settings-panel-body"};function pa(e,t,s,i,n,a){const o=l("base-backdrop"),r=l("settings-panel-header"),c=l("field-language"),k=l("field-date-format"),C=l("field-time-format"),T=l("field-background-map"),L=l("app-version");return R((d(),p("div",null,[m(o,{onClick:a.disable},null,8,["onClick"]),f("div",ua,[m(r,{onClose:a.disable},null,8,["onClose"]),f("div",ma,[m(c,{settings:e.settings},null,8,["settings"]),m(k,{settings:e.settings},null,8,["settings"]),m(C,{settings:e.settings},null,8,["settings"]),m(T,{settings:e.settings},null,8,["settings"]),m(L)],512)])],512)),[[B,e.isEnabled]])}const ha=h(ca,[["render",pa]]),fa={name:"InfoPanelHeader",emits:["close"]},ga={class:"info-panel-header opendata-row"};function _a(e,t,s,i,n,a){return d(),p("div",ga,[f("span",null,$(e.$t("info.title")),1),f("span",{class:"close-button",onClick:t[0]||(t[0]=o=>e.$emit("close"))},"×")])}const ba=h(fa,[["render",_a],["__scopeId","data-v-f30c3c6d"]]),$a={name:"InfoPanel",components:{InfoPanelHeader:ba,BaseBackdrop:W},data:function(){return{isEnabled:!1}},mounted(){g.$on("info-panel-open",this.enable)},methods:{enable(){this.isEnabled=!0,this.$nextTick(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0)})},disable(){this.isEnabled=!1}}},ya={class:"info-panel"},va={class:"info-panel-body"},Da={href:"https://github.com/StukFi/opendata",target:"_blank"};function ka(e,t,s,i,n,a){const o=l("base-backdrop"),r=l("info-panel-header");return R((d(),p("div",null,[m(o,{onClick:a.disable},null,8,["onClick"]),f("div",ya,[m(r,{onClose:a.disable},null,8,["onClose"]),f("div",va,[f("p",null,$(e.$t("info.p1")),1),f("p",null,[K($(e.$t("info.p2"))+" ",1),f("a",Da,$(e.$t("info.p3")),1),K(". ")])])])],512)),[[B,e.isEnabled]])}const Sa=h($a,[["render",ka]]),wa={name:"MediaControllerButton",props:{icon:{type:String,default:""},text:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["click"],computed:{style(){return this.icon?{backgroundImage:`url(/icons/${this.icon}.svg)`}:{}}}},Ca=["disabled"];function Ta(e,t,s,i,n,a){return d(),p("button",{style:te(a.style),disabled:s.disabled,onClick:t[0]||(t[0]=o=>e.$emit("click"))},$(s.text),13,Ca)}const ie=h(wa,[["render",Ta],["__scopeId","data-v-43287a41"]]),La={name:"ButtonPlaybackState",components:{MediaControllerButton:ie},props:{mediaController:{type:Object,required:!0}},computed:{icon(){return this.mediaController.state.isPlaybackEnabled?"media-pause":"media-play"},disabled(){return this.mediaController.isPlaybackFinished()},title(){if(this.disabled){if(this.mediaController.state.playbackMode==="time")return this.$t("playback.title.disabled.time");if(this.mediaController.state.playbackMode==="date")return this.$t("playback.title.disabled.date")}else return this.mediaController.state.isPlaybackEnabled?this.$t("playback.title.stop"):this.$t("playback.title.start");return""}},methods:{handleClick(){this.mediaController.togglePlayback()}}};function Ma(e,t,s,i,n,a){const o=l("media-controller-button");return d(),w(o,{icon:a.icon,disabled:a.disabled,title:a.title,onClick:a.handleClick},null,8,["icon","disabled","title","onClick"])}const Fa=h(La,[["render",Ma]]),Pa={name:"ButtonPlaybackMode",components:{MediaControllerButton:ie},props:{mediaController:{type:Object,required:!0}},computed:{icon(){return this.mediaController.state.playbackMode==="time"?"clock":"calendar"},title(){return this.mediaController.state.playbackMode==="time"?this.$t("playback.title.time"):this.$t("playback.title.date")}},methods:{handleClick(){this.mediaController.toggleMode()}}};function Ra(e,t,s,i,n,a){const o=l("media-controller-button");return d(),w(o,{icon:a.icon,title:a.title,onClick:a.handleClick},null,8,["icon","title","onClick"])}const Ba=h(Pa,[["render",Ra]]),Ia={name:"ButtonPlaybackSpeed",components:{MediaControllerButton:ie},props:{mediaController:{type:Object,required:!0}},computed:{playbackSpeed(){return this.mediaController.state.playbackSpeed/1e3+" s"}},methods:{handleClick(){this.mediaController.toggleSpeed()}}};function Oa(e,t,s,i,n,a){const o=l("media-controller-button");return d(),w(o,{text:a.playbackSpeed,title:e.$t("playback.title.speed"),onClick:a.handleClick},null,8,["text","title","onClick"])}const Ea=h(Ia,[["render",Oa]]);let Aa=class{constructor(){this.state=Be({isPlaybackEnabled:!1,playbackMode:"time",playbackSpeed:1e3,playbackSpeeds:[500,1e3,2e3],playbackTimeoutId:void 0})}play(){this.state.isPlaybackEnabled||(this.state.isPlaybackEnabled=!0,this.tick())}stop(){this.state.isPlaybackEnabled=!1,clearTimeout(this.state.playbackTimeoutId)}async tick(){if(this.state.isPlaybackEnabled){if(this.isPlaybackFinished()){this.stop();return}this.state.playbackMode==="date"?await V.dispatch("incrementDate"):this.state.playbackMode==="time"&&await V.dispatch("incrementTime"),this.state.playbackTimeoutId=setTimeout(()=>this.tick(),this.state.playbackSpeed)}}togglePlayback(){this.state.isPlaybackEnabled?this.stop():this.play()}toggleMode(){this.state.playbackMode=this.state.playbackMode==="date"?"time":"date"}toggleSpeed(){const t=this.state.playbackSpeeds.indexOf(this.state.playbackSpeed);this.state.playbackSpeed=t>=this.state.playbackSpeeds.length-1?this.state.playbackSpeeds[0]:this.state.playbackSpeeds[t+1]}isPlaybackFinished(){return this.state.playbackMode==="time"&&V.getters.isNewestTimeSelected||this.state.playbackMode==="date"&&V.getters.isNewestDateSelected}};function xa(){return new Aa}const Va={name:"MediaController",components:{ButtonPlaybackState:Fa,ButtonPlaybackMode:Ba,ButtonPlaybackSpeed:Ea},data(){return{mediaController:xa()}}},Na={class:"media-controller"};function ja(e,t,s,i,n,a){const o=l("button-playback-mode"),r=l("button-playback-state"),c=l("button-playback-speed");return d(),p("div",Na,[m(o,{"media-controller":n.mediaController},null,8,["media-controller"]),m(r,{"media-controller":n.mediaController},null,8,["media-controller"]),m(c,{"media-controller":n.mediaController},null,8,["media-controller"])])}const Ua=h(Va,[["render",ja]]),Ga={name:"SearchSuggestListItem",props:{suggestion:{type:String,required:!0}},emits:["click"]};function Ha(e,t,s,i,n,a){return d(),p("p",{class:"search-suggest-list-item",onClick:t[0]||(t[0]=o=>e.$emit("click"))},$(s.suggestion),1)}const qa=h(Ga,[["render",Ha]]),Ka={name:"SearchSuggestList",components:{SearchSuggestListItem:qa},props:{searchTerm:{type:String,required:!0},sites:{type:Array,required:!0}},emits:["select"],data:function(){return{isEnabled:!1}},computed:{suggestions(){let e=[];return this.sites.forEach(t=>{t.toLowerCase().indexOf(this.searchTerm.toLowerCase())>=0&&(e.includes(t)||e.push(t))}),e.sort()}},methods:{show(){this.isEnabled=!0},hide(){this.isEnabled=!1}}},Ya={class:"search-suggest-list"},za={class:"list-container"};function Za(e,t,s,i,n,a){const o=l("search-suggest-list-item");return R((d(),p("div",Ya,[f("div",za,[(d(!0),p(U,null,G(a.suggestions,r=>(d(),w(o,{key:r,suggestion:r,onClick:c=>e.$emit("select",r)},null,8,["suggestion","onClick"]))),128))])],512)),[[B,e.isEnabled&&a.suggestions.length>0]])}const Wa=h(Ka,[["render",Za]]),Ja={name:"SearchBar",components:{SearchSuggestList:Wa},mixins:[Se],emits:["featureSelectedViaSearch"],data(){return{searchTerm:"",features:[]}},computed:{mode(){return this.$store.state.settings.settings.mode},isDoseRateMode(){return this.mode==="dose_rates"},isAirRadionuclidesMode(){return this.mode==="air_radionuclides"},sites(){let e=[];for(let t=0;t<this.features.length;++t){const s=this.features[t].get("site");e.includes(s)||e.push(s)}return e}},watch:{mode(e){(e==="dose_rates"||e==="air_radionuclides")&&this.updateFeatures()}},mounted(){this.isDoseRateMode?g.$on("doseRateLayerChanged",this.onDoseRateLayerChanged):this.isAirRadionuclidesMode&&g.$on("radionuclideLayerChanged",this.onRadionuclideLayerChanged)},methods:{updateFeatures(){this.features=[],this.isDoseRateMode?(g.$off("radionuclideLayerChanged",this.onRadionuclideLayerChanged),g.$on("doseRateLayerChanged",this.onDoseRateLayerChanged)):this.isAirRadionuclidesMode&&(g.$off("doseRateLayerChanged",this.onDoseRateLayerChanged),g.$on("radionuclideLayerChanged",this.onRadionuclideLayerChanged))},onDoseRateLayerChanged(e){this.features=e.getSource().getFeatures()},onRadionuclideLayerChanged(e){this.features=e.getSource().getFeatures()},onSuggestionSelected(e){this.searchTerm=e,this.search()},search(){if(this.searchTerm.length>0){const e=this.isDoseRateMode?"dose_rates":"air_radionuclides";for(let t=0;t<this.features.length;++t){const s=this.features[t].get("site");if(s.toLowerCase()===this.searchTerm.toLowerCase()){this.searchTerm=s,this.blur(),g.$emit("featureSelectedViaSearch",this.features[t],e);break}}}},showSuggestions(){this.$refs.searchSuggestList.show()},hideSuggestions(){this.$refs.searchSuggestList.hide()},blur(){this.$refs.searchBarInput.blur(),this.hideSuggestions()}}},Qa=["value"];function Xa(e,t,s,i,n,a){const o=l("search-suggest-list"),r=Ie("click-away");return R((d(),p("div",{class:A(["search-bar",{"dose-rate-mode":a.isDoseRateMode,"air-radionuclides-mode":a.isAirRadionuclidesMode}])},[f("span",{class:"search-bar__icon",onClick:t[0]||(t[0]=c=>a.search())}),f("input",{ref:"searchBarInput",value:n.searchTerm,type:"text",maxlength:"28",spellcheck:!1,class:"search-bar__input",onInput:t[1]||(t[1]=c=>n.searchTerm=c.target.value),onClick:t[2]||(t[2]=c=>a.showSuggestions()),onFocus:t[3]||(t[3]=c=>a.showSuggestions()),onKeyup:t[4]||(t[4]=Oe(c=>a.search(),["enter"]))},null,40,Qa),m(o,{ref:"searchSuggestList","search-term":n.searchTerm,sites:a.sites,onSelect:a.onSuggestionSelected},null,8,["search-term","sites","onSelect"])],2)),[[r,a.blur]])}const en=h(Ja,[["render",Xa]]),tn={name:"ButtonDateTime",props:{icon:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["click"],data(){return{iconStyle:{backgroundImage:"none"}}},watch:{icon:"updateStyle",disabled:"updateStyle"},mounted(){this.updateStyle()},methods:{async updateStyle(){if(this.disabled)this.iconStyle={backgroundImage:"none"};else try{const e=`/icons/${this.icon}.svg`;this.disabled||(this.iconStyle={backgroundImage:`url(${e})`})}catch{this.iconStyle={backgroundImage:"none"}}}}},sn=["disabled"];function an(e,t,s,i,n,a){return d(),p("button",{style:te(n.iconStyle),disabled:s.disabled,onClick:t[0]||(t[0]=o=>e.$emit("click"))},null,12,sn)}const J=h(tn,[["render",an],["__scopeId","data-v-8b41e01d"]]),nn={name:"ButtonDecrementDate",components:{ButtonDateTime:J},computed:{isOldestDateSelected(){return this.$store.getters.isOldestDateSelected}},methods:{decrementDate(){this.$store.dispatch("decrementDate")}}};function on(e,t,s,i,n,a){const o=l("button-date-time");return d(),w(o,{icon:"caret-left",disabled:a.isOldestDateSelected,onClick:t[0]||(t[0]=r=>a.decrementDate())},null,8,["disabled"])}const rn=h(nn,[["render",on],["__scopeId","data-v-fbb26811"]]),ln={name:"ButtonIncrementDate",components:{ButtonDateTime:J},computed:{isNewestDateSelected(){return this.$store.getters.isNewestDateSelected}},methods:{incrementDate(){this.$store.dispatch("incrementDate")}}};function dn(e,t,s,i,n,a){const o=l("button-date-time");return d(),w(o,{icon:"caret-right",disabled:a.isNewestDateSelected,onClick:t[0]||(t[0]=r=>a.incrementDate())},null,8,["disabled"])}const cn=h(ln,[["render",dn],["__scopeId","data-v-3c041075"]]),un={name:"ButtonDatepicker",emits:["calendar-popup-open"],computed:{selectedDate(){const e=this.$store.state.datetime.selectedDate;if(e)switch(this.$store.state.settings.settings.dateFormat){case"fi":default:return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear();case"iso":return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},methods:{openCalendar(){g.$emit("calendar-popup-open")}}};function mn(e,t,s,i,n,a){return d(),p("div",{class:"datepicker-button opendata-row",onClick:t[0]||(t[0]=(...o)=>a.openCalendar&&a.openCalendar(...o))},$(a.selectedDate),1)}const pn=h(un,[["render",mn]]),hn={name:"DateWidget",components:{ButtonDecrementDate:rn,ButtonIncrementDate:cn,ButtonDatepicker:pn}},fn={class:"date-widget"};function gn(e,t,s,i,n,a){const o=l("button-decrement-date"),r=l("button-datepicker"),c=l("button-increment-date");return d(),p("div",fn,[m(o),m(r),m(c)])}const _n=h(hn,[["render",gn],["__scopeId","data-v-90531585"]]),bn={name:"ButtonDecrementTime",components:{ButtonDateTime:J},computed:{isOldestTimeSelected(){return this.$store.getters.isOldestTimeSelected}},methods:{decrementTime(){this.$store.dispatch("decrementTime")}}};function $n(e,t,s,i,n,a){const o=l("button-date-time");return d(),w(o,{icon:"caret-left",disabled:a.isOldestTimeSelected,onClick:t[0]||(t[0]=r=>a.decrementTime())},null,8,["disabled"])}const yn=h(bn,[["render",$n],["__scopeId","data-v-d2bbd66d"]]),vn={name:"ButtonIncrementTime",components:{ButtonDateTime:J},computed:{isNewestTimeSelected(){return this.$store.getters.isNewestTimeSelected}},methods:{incrementTime(){this.$store.dispatch("incrementTime")}}};function Dn(e,t,s,i,n,a){const o=l("button-date-time");return d(),w(o,{icon:"caret-right",disabled:a.isNewestTimeSelected,onClick:t[0]||(t[0]=r=>a.incrementTime())},null,8,["disabled"])}const kn=h(vn,[["render",Dn],["__scopeId","data-v-719478c8"]]),Sn={name:"Timepicker",emits:["timepicker-list-toggle"],computed:{formattedTime(){let e=this.$store.state.datetime.selectedTime;if(e)switch(e=e.slice(0,2)+":"+e.slice(2,4),this.$store.state.settings.settings.timeFormat){case"12h":return e=ne.convertTimeTo12HourClock(e),e.split(" ")[0]+"Z "+e.split(" ")[1];case"24h":default:return e+"Z"}}},methods:{toggleTimeList(){g.$emit("timepicker-list-toggle")}}},wn={class:"timepicker"};function Cn(e,t,s,i,n,a){return d(),p("div",wn,[f("div",{class:"timepicker-button opendata-row",onClick:t[0]||(t[0]=(...o)=>a.toggleTimeList&&a.toggleTimeList(...o))},$(a.formattedTime),1)])}const Tn=h(Sn,[["render",Cn]]),Ln={name:"TimeWidget",components:{ButtonDecrementTime:yn,ButtonIncrementTime:kn,Timepicker:Tn}},Mn={class:"time-widget"};function Fn(e,t,s,i,n,a){const o=l("button-decrement-time"),r=l("timepicker"),c=l("button-increment-time");return d(),p("div",Mn,[m(o),m(r),m(c)])}const Pn=h(Ln,[["render",Fn],["__scopeId","data-v-41c67fbc"]]),Rn={name:"TheHeader",components:{DateWidget:_n,TimeWidget:Pn}},Bn={class:"header"};function In(e,t,s,i,n,a){const o=l("date-widget"),r=l("time-widget");return d(),p("div",Bn,[m(o),m(r)])}const On=h(Rn,[["render",In],["__scopeId","data-v-a996c134"]]),En={name:"TimepickerListItem",props:{time:{type:String,default:""}},emits:["click"],computed:{selectedTime(){return this.$store.state.datetime.selectedTime},formattedTime(){let e=this.time.slice(0,2)+":"+this.time.slice(2,4);switch(this.$store.state.settings.settings.timeFormat){case"12h":return ne.convertTimeTo12HourClock(e);case"24h":default:return e}}},methods:{setTime(){this.$store.commit("setTime",this.time),this.$emit("click")}}};function An(e,t,s,i,n,a){return d(),p("li",{class:A({selected:s.time==a.selectedTime}),onClick:t[0]||(t[0]=(...o)=>a.setTime&&a.setTime(...o))},$(a.formattedTime),3)}const xn=h(En,[["render",An]]),Vn={name:"TimepickerList",components:{TimepickerListItem:xn,BaseBackdrop:W},data:function(){return{isEnabled:!1}},computed:{availableTimesForSelectedDate(){return this.$store.getters.availableTimesForSelectedDate}},mounted(){g.$on("timepicker-list-toggle",this.toggle)},methods:{close(){this.isEnabled=!1},toggle(){this.isEnabled=!this.isEnabled}}},Nn={class:"timepicker-list"},jn={class:"list-container"};function Un(e,t,s,i,n,a){const o=l("base-backdrop"),r=l("timepicker-list-item");return R((d(),p("div",null,[m(o,{onClick:a.close},null,8,["onClick"]),f("ul",Nn,[f("div",jn,[(d(!0),p(U,null,G(a.availableTimesForSelectedDate.slice().reverse(),(c,k)=>(d(),w(r,{key:k,time:c,onClick:t[0]||(t[0]=C=>a.close())},null,8,["time"]))),128))])])],512)),[[B,e.isEnabled]])}const Gn=h(Vn,[["render",Un],["__scopeId","data-v-bf2e8c75"]]),Hn={name:"DatepickerPopup",components:{VueDatePicker:ke,BaseBackdrop:W},data:function(){return{isEnabled:!1,fi:"fi",en:"en"}},computed:{language:{get(){switch(this.$store.state.settings.settings.locale){case"en":default:return this.en;case"fi":return this.fi}}},date:{get(){return this.$store.state.datetime.selectedDate},set(e){this.$store.dispatch("setDate",e)}},allowedDates(){var e=this.$store.state.datetime.availableDatasets,t=[];return e.length===0||e.forEach(s=>{t.push(new Date(s.date))}),t}},mounted(){g.$on("calendar-popup-open",this.open)},methods:{formatDate(e){switch(this.$store.state.settings.settings.dateFormat){case"fi":default:return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear();case"iso":return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},open(){this.isEnabled=!0},close(){this.isEnabled=!1}}};function qn(e,t,s,i,n,a){const o=l("base-backdrop"),r=l("VueDatePicker");return R((d(),p("div",null,[m(o,{onClick:a.close},null,8,["onClick"]),m(r,{modelValue:a.date,"onUpdate:modelValue":t[0]||(t[0]=c=>a.date=c),inline:!0,"menu-class-name":"dp-custom-menu",locale:a.language,"auto-apply":"","hide-offset-dates":"","allowed-dates":a.allowedDates,onDateUpdate:a.close},null,8,["modelValue","locale","allowed-dates","onDateUpdate"])],512)),[[B,e.isEnabled]])}const Kn=h(Hn,[["render",qn]]),Yn={name:"TheMap",components:{DoseRateLayer:ot,RadionuclideLayer:dt,FeaturePopover:Mt,FeaturePopup:hs,MapLegend:gt,SearchBar:en,ButtonOpenSettings:ys,ButtonOpenInfo:Ts,ButtonChangeMode:Bs,SettingsPanel:ha,InfoPanel:Sa,MediaController:Ua,TheHeader:On,TimepickerList:Gn,DatepickerPopup:Kn},emits:["featureClicked","featureHovered","emptyMapLocationClicked","emptyMapLocationHovered"],data(){return{map:null,baseLayer:null,default:Xs,custom:Js,customStyle:Qs}},computed:{mode(){return this.$store.state.settings.settings.mode},isDoseRatesMode(){return this.mode==="dose_rates"},selectedBaseLayer(){return this.getBaseLayer()}},watch:{selectedBaseLayer(e){this.map&&this.map.getLayers().setAt(0,e)},mode(e){this.switchLayers(e==="dose_rates")}},mounted(){this.baseLayer=this.selectedBaseLayer,this.map=new Ve({target:"map",layers:[this.baseLayer],controls:[new Ne,new je,new Ue,new Ge],view:new He({center:qe([25.75,65.75]),enableRotation:!1,minZoom:4,maxZoom:16,zoom:5})}),this.custom===void 0?this.custom=this.default:this.customStyle!==void 0&&this.customStyle(this.custom),this.map.on("click",this.onMapInteraction),this.map.on("pointermove",this.onMapInteraction),this.map.on("moveend",this.onZoomChange),g.$on("featurePopupOpened",this.centerViewOnFeaturePopup),this.$refs.featurePopover&&this.$refs.featurePopover.overlay&&this.map.addOverlay(this.$refs.featurePopover.overlay),this.$refs.featurePopup&&this.$refs.featurePopup.overlay&&this.map.addOverlay(this.$refs.featurePopup.overlay),this.switchLayers(this.mode==="dose_rates")},methods:{getBaseLayer(){switch(this.$store.state.settings.settings.backgroundMap){case"custom":return this.custom;case"default":return this.default;default:return this.default}},switchLayers(e){if(this.map){const t=this.$refs.doseRateLayer?this.$refs.doseRateLayer.vectorLayer:null,s=this.$refs.radionuclideLayer?this.$refs.radionuclideLayer.vectorLayer:null;e?(s&&this.map.removeLayer(s),t&&(this.map.addLayer(t),this.onZoomChange())):(t&&this.map.removeLayer(t),s&&(this.map.addLayer(s),this.onZoomChange()))}},onMapInteraction(e){var t=this.map.getEventPixel(e.originalEvent),s=this.map.getFeaturesAtPixel(t,{layerFilter:i=>i!==this.custom});s.length>0?e.type=="click"?g.$emit("featureClicked",s[0]):e.type=="pointermove"&&g.$emit("featureHovered",s[0]):e.type=="click"?g.$emit("emptyMapLocationClicked"):e.type=="pointermove"&&g.$emit("emptyMapLocationHovered")},onZoomChange(){const e=this.map.getView().getZoom();this.$refs.doseRateLayer.updateFeatureRadius(e),this.$refs.radionuclideLayer.updateFeatureRadius(e)},centerViewOnFeaturePopup(e){if(this.map&&this.$refs.featurePopup&&this.$refs.featurePopup.$el){const t=e.getGeometry().getCoordinates(),s=this.map.getPixelFromCoordinate(t);s[1]-=this.$refs.featurePopup.$el.clientHeight*.58;const i=this.map.getCoordinateFromPixel(s);this.map.getView().animate({center:i,duration:750})}}}},zn={id:"map"};function Zn(e,t,s,i,n,a){const o=l("dose-rate-layer"),r=l("radionuclide-layer"),c=l("feature-popover"),k=l("feature-popup"),C=l("map-legend"),T=l("search-bar"),L=l("button-open-settings"),I=l("button-open-info"),M=l("button-change-mode"),S=l("settings-panel"),F=l("info-panel"),b=l("media-controller"),D=l("the-header"),u=l("timepicker-list"),v=l("datepicker-popup"),y=l("vue-progress-bar");return d(),p("div",zn,[m(o,{ref:"doseRateLayer"},null,512),m(r,{ref:"radionuclideLayer"},null,512),m(c,{ref:"featurePopover"},null,512),m(k,{ref:"featurePopup"},null,512),a.isDoseRatesMode?(d(),w(C,{key:0})):O("",!0),m(T),m(L),m(I),m(M),m(S),m(F),a.isDoseRatesMode?(d(),w(b,{key:1})):O("",!0),a.isDoseRatesMode?(d(),w(D,{key:2})):O("",!0),m(u),m(v),m(y)])}const Wn=h(Yn,[["render",Zn]]),Jn={name:"App",components:{TheMap:Wn},mounted(){this.$store.dispatch("initialize")}};function Qn(e,t,s,i,n,a){const o=l("the-map");return d(),w(o)}const Xn=h(Jn,[["render",Qn]]);var Me={exports:{}};(function(e){e.exports=function(t){var s={};function i(n){if(s[n])return s[n].exports;var a=s[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=s,i.d=function(n,a,o){i.o(n,a)||Object.defineProperty(n,a,{enumerable:!0,get:o})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,a){if(a&1&&(n=i(n)),a&8||a&4&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),a&2&&typeof n!="string")for(var r in n)i.d(o,r,(function(c){return n[c]}).bind(null,r));return o},i.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(a,"a",a),a},i.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},i.p="",i(i.s="fb15")}({8875:function(t,s,i){var n,a,o;(function(r,c){a=[],n=c,o=typeof n=="function"?n.apply(s,a):n,o!==void 0&&(t.exports=o)})(typeof self<"u"?self:this,function(){function r(){var c=Object.getOwnPropertyDescriptor(document,"currentScript");if(!c&&"currentScript"in document&&document.currentScript||c&&c.get!==r&&document.currentScript)return document.currentScript;try{throw new Error}catch(v){var k=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,C=/@([^@]*):(\d+):(\d+)\s*$/ig,T=k.exec(v.stack)||C.exec(v.stack),L=T&&T[1]||!1,I=T&&T[2]||!1,M=document.location.href.replace(document.location.hash,""),S,F,b,D=document.getElementsByTagName("script");L===M&&(S=document.documentElement.outerHTML,F=new RegExp("(?:[^\\n]+?\\n){0,"+(I-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),b=S.replace(F,"$1").trim());for(var u=0;u<D.length;u++)if(D[u].readyState==="interactive"||D[u].src===L||L===M&&D[u].innerHTML&&D[u].innerHTML.trim()===b)return D[u];return null}}return r})},"8bbf":function(t,s){t.exports=Pe},fb15:function(t,s,i){if(i.r(s),typeof window<"u"){var n=window.document.currentScript;{var a=i("8875");n=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a})}var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(i.p=o[1])}var r=i("8bbf");function c(M,S,F,b,D,u){return Object(r.openBlock)(),Object(r.createBlock)("div",{style:b.finalStyle},null,4)}var k=typeof window<"u",C={name:"VueProgress",serverCacheKey:function(){return"Progress"},setup:function(){var S=k?Object(r.inject)("RADON_LOADING_BAR"):{percent:0,options:{canSuccess:!0,show:!1,color:"rgb(19, 91, 55)",failedColor:"red",thickness:"2px",transition:{speed:"0.2s",opacity:"0.6s",termination:300},location:"top",autoRevert:!0,inverse:!1}},F=Object(r.computed)(function(){var b=S.options,D=!!b.show,u=b.location,v={"z-index":999999,"background-color":b.canSuccess?b.color:b.failedColor,opacity:b.show?1:0,position:b.position};return u==="top"||u==="bottom"?(u==="top"?v.top="0px":v.bottom="0px",b.inverse?v.right="0px":v.left="0px",v.width=S.percent+"%",v.height=b.thickness,v.transition=(D?"width "+b.transition.speed+", ":"")+"opacity "+b.transition.opacity):(u==="left"||u==="right")&&(u==="left"?v.left="0px":v.right="0px",b.inverse?v.top="0px":v.bottom="0px",v.height=S.percent+"%",v.width=b.thickness,v.transition=(D?"height "+b.transition.speed+", ":"")+"opacity "+b.transition.opacity),v});return{progress:S,finalStyle:F}}};C.render=c;var T=C;function L(M,S){for(var F=1,b,D;F<arguments.length;++F){D=arguments[F];for(b in D)Object.prototype.hasOwnProperty.call(D,b)&&(M[b]=D[b])}return M}var I={install:function(S,F){var b={canSuccess:!0,show:!1,color:"#73ccec",position:"fixed",failedColor:"red",thickness:"2px",transition:{speed:"0.2s",opacity:"0.6s",termination:300},autoRevert:!0,location:"top",inverse:!1,autoFinish:!0},D=L(b,F),u=Object(r.reactive)({percent:0,options:D});S.provide("RADON_LOADING_BAR",u);var v={state:{tFailColor:"",tColor:"",timer:null,cut:0},start:function(_){var j=this;_||(_=3e3),u.percent=0,u.options.show=!0,u.options.canSuccess=!0,this.state.cut=1e4/Math.floor(_),clearInterval(this.state.timer),this.state.timer=setInterval(function(){j.increase(j.state.cut*Math.random()),u.percent>95&&u.options.autoFinish&&j.finish()},100)},set:function(_){u.options.show=!0,u.options.canSuccess=!0,u.percent=Math.floor(_)},get:function(){return Math.floor(u.percent)},increase:function(_){u.percent=Math.min(99,u.percent+Math.floor(_))},decrease:function(_){u.percent=u.percent-Math.floor(_)},hide:function(){var _=this;clearInterval(this.state.timer),this.state.timer=null,setTimeout(function(){u.options.show=!1,Object(r.nextTick)(function(){setTimeout(function(){u.percent=0},100),u.options.autoRevert&&setTimeout(function(){_.revert()},300)})},u.options.transition.termination)},pause:function(){clearInterval(this.state.timer)},finish:function(){u.percent=100,this.hide()},fail:function(){u.options.canSuccess=!1,u.percent=100,this.hide()},setFailColor:function(_){u.options.failedColor=_},setColor:function(_){u.options.color=_},setLocation:function(_){u.options.location=_},setTransition:function(_){u.options.transition=_},tempFailColor:function(_){this.state.tFailColor=u.options.failedColor,u.options.failedColor=_},tempColor:function(_){this.state.tColor=u.options.color,u.options.color=_},tempLocation:function(_){this.state.tLocation=u.options.location,u.options.location=_},tempTransition:function(_){this.state.tTransition=u.options.transition,u.options.transition=_},revertColor:function(){u.options.color=this.state.tColor,this.state.tColor=""},revertFailColor:function(){u.options.failedColor=this.state.tFailColor,this.state.tFailColor=""},revertLocation:function(){u.options.location=this.state.tLocation,this.state.tLocation=""},revertTransition:function(){u.options.transition=this.state.tTransition,this.state.tTransition={}},revert:function(){u.options.autoRevert&&(this.state.tColor&&this.revertColor(),this.state.tFailColor&&this.revertFailColor(),this.state.tLocation&&this.revertLocation(),this.state.tTransition&&(this.state.tTransition.speed!==void 0||this.state.tTransition.opacity!==void 0)&&this.revertTransition())},parseMeta:function(_){for(var j in _.func){var P=_.func[j];switch(P.call){case"color":switch(P.modifier){case"set":this.setColor(P.argument);break;case"temp":this.tempColor(P.argument);break}break;case"fail":switch(P.modifier){case"set":this.setFailColor(P.argument);break;case"temp":this.tempFailColor(P.argument);break}break;case"location":switch(P.modifier){case"set":this.setLocation(P.argument);break;case"temp":this.tempLocation(P.argument);break}break;case"transition":switch(P.modifier){case"set":this.setTransition(P.argument);break;case"temp":this.tempTransition(P.argument);break}break}}}};S.component("vue-progress-bar",T),S.config.globalProperties.$Progress=v}};s.default=I}})})(Me);var ei=Me.exports;const ti=Ze(ei),si={color:"white",failedColor:"#e95024",thickness:"0.25em"},N=Ee(Xn);N.use(V);N.use(X);N.use(ti,si);N.use(Se);N.use(st);N.mount("#app");
